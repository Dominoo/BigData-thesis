% options:
% thesis=B bachelor's thesis
% thesis=M master's thesis
% czech thesis in Czech language
% slovak thesis in Slovak language
% english thesis in English language
% hidelinks remove colour boxes around hyperlinks

\documentclass[thesis=M,czech]{FITthesis}[2012/06/26]

\usepackage[utf8]{inputenc} % LaTeX source encoded as UTF-8

%\usepackage{color}
\usepackage{graphicx} %graphics files inclusion
\usepackage{amsmath} %advanced maths
\usepackage{amssymb} %additional math symbols
\usepackage{listings}
%\usepackage[x11names]{xcolor}

\usepackage{caption}

%\usepackage{graphicx} %graphics files inclusion
% \usepackage{amsmath} %advanced maths
% \usepackage{amssymb} %additional math symbols
\usepackage{wrapfig}
\usepackage{tabularx}
%\usepackage{float}
%\restylefloat{table}

\usepackage{dirtree} %directory tree visualisation

%\usepackage{xcolor}
%\usepackage{color}
%%\usepackage{listings}

%\definecolor{dkgreen}{rgb}{0,0.6,0}
%\definecolor{gray}{rgb}{0.5,0.5,0.5}
%\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=tb,
  language=SQL,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
%  numberstyle=\tiny\color{gray},
 % keywordstyle=\color{blue},
%  commentstyle=\color{dkgreen},
 % stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true
  tabsize=3
}

% % list of acronyms
% \usepackage[acronym,nonumberlist,toc,numberedsection=autolabel]{glossaries}
% \iflanguage{czech}{\renewcommand*{\acronymname}{Seznam pou{\v z}it{\' y}ch zkratek}}{}
% \makeglossaries

\newcommand{\tg}{\mathop{\mathrm{tg}}} %cesky tangens
\newcommand{\cotg}{\mathop{\mathrm{cotg}}} %cesky cotangens

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % 
% ODTUD DAL VSE ZMENTE
% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % 

\department{Katedra \ldots (Softwarového inženýrství)}
\title{
}
\authorGN{Dominik} %(křestní) jméno (jména) autora
\authorFN{Veselý} %příjmení autora
\authorWithDegrees{Bc. Dominik Veselý} %jméno autora včetně současných akademických titulů
\supervisor{Ing. Michal Valenta, PhD}
\acknowledgements{Doplňte, máte-li komu a za co děkovat. V~opačném případě úplně odstraňte tento příkaz.}
\abstractCS{V~několika větách shrňte obsah a přínos této práce v~češtině. Po přečtení abstraktu by se čtenář měl mít čtenář dost informací pro rozhodnutí, zda chce Vaši práci číst.}
\abstractEN{Sem doplňte ekvivalent abstraktu Vaší práce v~angličtině.}
\placeForDeclarationOfAuthenticity{V~Praze}
\declarationOfAuthenticityOption{4} %volba Prohlášení (číslo 1-6)
\keywordsCS{Nahraďte seznamem klíčových slov v češtině oddělených čárkou.}
\keywordsEN{Nahraďte seznamem klíčových slov v angličtině oddělených čárkou.}


\begin{document}
	
% \newacronym{CVUT}{{\v C}VUT}{{\v C}esk{\' e} vysok{\' e} u{\v c}en{\' i} technick{\' e} v Praze}
% \newacronym{FIT}{FIT}{Fakulta informa{\v c}n{\' i}ch technologi{\' i}}

\begin{introduction}

\input{introduction.tex}


\end{introduction}


\chapter{Co jsou to BigData}

\input{chapter2.tex}


%mozna jen podsekce bigdata%
\chapter{BigData techniky}

\input{chapter3.tex}

\chapter{BigData Platforma Apache}

\input{chapter4.tex}

\chapter{Cassandra}	

\input{chapter5.tex}


\chapter{Vhodné případy užití}
\input{chapter6.tex}

\section{Dotazování nad daty s dvojsměrnou vazbou}
Další možností případu užití je ukládání informací o uskutečněných transkacích. Kdy po každé transakci ukládáme který uživatel si koupil jaký předmět. Tyto informace pro nás mají velkou informační hodnotu, protože nás může zajímat, kterí uživatelé si koupili konkrétní předmět, nebo také jaké předměty si koupil konkrétní uživatel. V malém elektronickém obchodě, který má pár desítek předmětů a pár set uživatelů takovéto informace můžeme ukládat klasickým způsobem do relační databáze, která takovýto obnos dat zvládne. V případě, že máme několik desítek tisíc uživatelů a v podstatě neomezený sortiment zboží a denně děláme několik stovek tisic transakcí, dostáváme se do objemu dat, na který relační databáze nestačí a musíme použít nějaký NoSQL nástroj. Tento příklad užití by měl poukázat na to, že přestože je zadání velice triviální a jednoduše řešitelné pomocí relačních databází, tak při určitém objemu dat, se problém stává velice komplikovaný a musí se řešit pomocí komplexnějších nástrojů

\begin{lstlisting}[caption={Vytvoření tabulky s dvojsměrnou vazbou pomocí indexu},label=CQL10]
CREATE TABLE itemstracking ( 
item text,
user text,
timestamp timestamp,
PRIMARY KEY (item)
);

CREATE INDEX userIndex ON itemstracking (user);
\end{lstlisting}

CQL neumí dotazování na sloupce mimo primární klíč, k tomu Cassandra využívá sekundární indexy. Po přídání indexu může CQL dotaz obsahovat filtrování podle sloupce \emph{item} nebo \emph{user}. Přestože se nyní můžeme dotazovat díky indexu i na položky uživatele v dokumentaci cassandry \cite{cassaindex} se dočteme, že používání indexů na sloupce s velkou kardinalitou není vhodné vzhledem k implementaci. Kdybychom měli velice omezený seznam uživatelů nebo předmětů, mohli bychom tabulku vymodelovat pomocí indexu, toto řešení však v našem případě není dostatečné. Dalším řešením je vytvořit si \uv{vlastní index} pomocí tabulky nebo si vytvořit další tabulku, kde budeme indexovat druhý parametr (tedy uživatele jako primární klíč) v našem případě (při daném počtu sloupců) se jedná o téměř totožná řešení. 

\begin{lstlisting}[caption={Vytvoření indexovací tabulky},label=CQL11]
CREATE TABLE userstrackingt ( 
item text,
user text,
timestamp timestamp,
PRIMARY KEY (user)
);
\end{lstlisting}

Nyní sice duplikujeme o trochu více dat, než bychom duplikovali pomocí indexu (který indexuje data lokálně), ale nyní se můžeme jednoduše dotazovat na uživateli a předměty bez jakéhokoliv omezení na škálování a rozsah hodnot. 

\section{Ukládání Solr indexu do Cassandry}
Poslední demonstrovaný příklad ukáže použití vyhledávácího systému Solr, který byl popsán v  \ref{solr}. Tento systém indexuje data do lokálního souboru na disku. Fanoušci Cassandry společně s firmou Datastax vytvořili modifikaci, díky níž se index ukládá přímo do Cassandry (lokálně) a data samotná se ukládájí do Cassandry distribuovaně. Výhody tohoto řešení jsou zřejmé. Získáme distribuované vyhledávací řešení se všemi výhodami Cassandry. K datům můžeme přistupovat pomocí, SolR nebo CQL, což zanechává vysokou flexibilitu přístupu k datům. Využití SolR je kompromisem mezi rychlostí Cassandry a Analytickym schopnostem Hadoopu. Patrně největšími benefity je automatické duplikování dat a také automatické indexování dat vložených do Cassandry a také možnost zapisovat na kterýkoliv SolR uzel, címž se minimalizuje problém úzkého hrdla při zápisu do Solr indexu. Příklad poukáže na základní vyhledávací vlastnosti Solr a jeho výhody oproti CQL.


\begin{conclusion}
\input{conclusion.tex}
\end{conclusion}

\nocite{*}
\bibliographystyle{iso690}
\bibliography{mybibliographyfile}

\appendix

\chapter{Seznam použitých zkratek}
% \printglossaries
\begin{description}
	\item[GUI] Graphical user interface
	\item[XML] Extensible markup language
	\item[CQL] Cassandra query language
	\item[SQL] Structured query language
	\item[NoSQL] Not only SQL
\end{description}

\chapter{Obsah přiloženého CD}

%upravte podle skutecnosti

\begin{figure}
	\dirtree{%
		.1 readme.txt\DTcomment{stručný popis obsahu CD}.
		.1 exe\DTcomment{adresář se spustitelnou formou implementace}.
		.1 src.
		.2 impl\DTcomment{zdrojové kódy implementace}.
		.2 thesis\DTcomment{zdrojová forma práce ve formátu \LaTeX{}}.
		.1 text\DTcomment{text práce}.
		.2 thesis.pdf\DTcomment{text práce ve formátu PDF}.
		.2 thesis.ps\DTcomment{text práce ve formátu PS}.
	}
\end{figure}

\end{document}
